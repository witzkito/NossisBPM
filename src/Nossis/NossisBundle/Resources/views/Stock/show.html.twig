{% extends "NossisBundle::layout.html.twig" %}

{% block title %} Stock {{ stock.id }}{% endblock %}

{% block botonera %}    
       
        <a class="boton-blue" id="btt-1" href="{{ path('trazladar_stock', { 'id': stock.id})}}">Trazladar</a>
        <a class="boton-blue" id="btt-3" href="{{ path('index_fraccionar', { 'id': stock.id})}}">Fraccionar</a>
       
{% endblock %}
{% block body %}
    
    </br></br>
    <h3>Stock {{ stock.id }}</h3>    
    <hr class="hr3-inicio">
    <div class="show">
        <div class="grid">
            <table>
                <thead>
                    <tr>
                        <th>Origen:</th>
                        {% if stock.origenfraccionado is not null %}
                            <td>Fraccionado - <a href="{{ path('show_fraccionar', {'id' : stock.origenfraccionado.id}) }}">Ver</a></td>
                        {% else %}
                            <td>Produccion</td>
                        {% endif %}
                    </tr>
                    <tr>
                        <th>Producto:</th><td>{{ stock.producto.nombre }}</td>                    
                    </tr>
                    <tr>
                        <th>Lote:</th><td> {{ stock.lote}}</td>
                    </tr>
                    <tr>
                        <th>Ubicacion:</th><td>Area {{stock.area.nombre}}</td>
                    </tr>
                    <tr>
                        <th>Cantidad Restante:</th><td> {{stock.actual}}</td>
                    </tr>
                    <tr>
                        <th>Fecha Envasado:</th>
                        <td> {{stock.fechaenvasado | date('d/m/y')}}</td>
                    </tr>
                    <tr>
                        <th>Fecha Ingreso:</th>
                        <td> {{stock.fechaingreso | date('d/m/y h:m A')}}</td>
                    </tr>
                    <tr>
                        <th>Palet:</th>
                        <td> {{stock.palet}}</td>
                    </tr>
                    <tr>
                        <th>Turno:</td>
                        <td> {{stock.turno}}</td>
                    </tr>
                    <tr>
                        <th>Codigo:</td>
                        <td> {{stock.codigo}}</td>
                    </tr>
                </thead>
                <tbody>
                    
                </tbody>
            </table>
        </div>
     </div>
     
        <h3 class="h3-stock">Historia</h3>
        <hr class="hr3-inicio">
        <div class="datagrid">

            <table>
                <thead>
                    <tr>
                        <th>Tipo</th>
                        <th>Fecha</th>
                        <th>Descripcion</th>
                    </tr>
                </thead>
                {% if (stock.estados | length) == 0 %}
                    <tr>
                        <td class="show-stock-estados-nombre">No hay Registros</td>
                    </tr>
                {% endif %}
                {% for estado in stock.estados %}
                    <tr>
                        <td class="show-stock-estados-nombre">{{ estado.estado.nombre }}</td>
                        <td>{{ estado.fecha | date('d-m-y h:i a') }}</td>
                        <td class="show-stock-estados-detalle">{{ estado.descripcion }}</td>
                    </tr>
                {% endfor %}
            </table>
         </div>
        
        <h3 class="h3-stock">Fraccionados</h3>
        <hr class="hr3-inicio">
        <div class="datagrid">

            <table>
                <thead>
                    <tr>
                        <th>Fecha</th>
                        <th>Cantidad</th>
                        <th>Destino</th>
                    </tr>
                </thead>
                {% if (stock.fraccionados | length) == 0 %}
                    <tr>
                        <td class="show-stock-estados-nombre">No se ha fraccionado</td>
                    </tr>
                {% endif %}
                {% for fraccionado in stock.fraccionados %}
                    <tr>
                        <td>{{ fraccionado.fecha | date('d/m/y h:m A') }}</td>
                        <td>{{ fraccionado.cantidad }}</td>
                        {% if fraccionado.stockDestino is null %}
                        <td>Todavia sin destino - <a href=" {{ path('fraccionar_stock', { 'id' : fraccionado.id }) }}">Ingresar</a></td>
                        {% else %}
                        <td>{{ fraccionado.stockDestino }} - <a href="{{ path('show_stock', {'id' : fraccionado.stockDestino.id}) }}">Ver</a></td>
                        {% endif %}
                    </tr>
                {% endfor %}
            </table>
         </div>
        
        <h3 class="h3-stock">Despachos</h3>
        <hr class="hr3-inicio">
        <div class="datagrid">

            <table>
                <thead>
                    <tr>
                        <th>Fecha</th>
                        <th>Nro. Orden</th>
                        <th>Cliente</th>
                        <th>Transportista</th>
                        <th>Confirmado</th>
                        <th>Acciones</th>
                        
                    </tr>
                </thead>
                {% for retiro in stock.retiros %}
                    <tr>
                        <td>{{ retiro.retiro.fechasalida | date('d/m/y h:m A') }}</td>
                        <td>{{ retiro.retiro.nroorden }}</td>
                        <td>{{ retiro.retiro.cliente }}</td>
                        <td>{{ retiro.retiro.transportista }}</td>
                        <td class="grid-column-confirmado align-center">
                            <span class="grid_boolean_{{ retiro.retiro.stringconfirmado }}">{{ retiro.retiro.stringconfirmado }}</span>
                        </td>
                        <td>
                            <a href="{{ path('edit_retiro', { 'id' : retiro.retiro.id }) }}">Ver</a>
                        </td>
                        
                    </tr>
                {% endfor %}
            </table>
         </div>
           
{% endblock %}
